!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("mobx")):"function"==typeof define&&define.amd?define(["mobx"],n):"object"==typeof exports?exports.imagine=n(require("mobx")):e.imagine=n(e.mobx)}(window,(function(e){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=1)}([function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bindingEngine=n.scopes=n.contexts=n.bind=void 0;var r=new(t(3).Imagine),i=t(0);Object.defineProperty(n,"observable",{enumerable:!0,get:function(){return i.observable}}),Object.defineProperty(n,"computed",{enumerable:!0,get:function(){return i.computed}}),n.bind=r.bind,n.contexts=r.bindingEngine.boundElements,n.scopes=r.bindingEngine.scopes,n.bindingEngine=r.bindingEngine},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BindingContext=void 0;var r=function(){this.propertyName="",this.preventCircularUpdate=!1};n.BindingContext=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Imagine=void 0;var r=t(4),i=t(2),o=function(){function e(){var e=this;this.bind=function(n,t,r){if(r&&(window.__debug_imagine=e),"#document-fragment"===(n=n||document.getElementsByTagName("body")[0]).nodeName)for(var o=0;o<n.childNodes.length;o++){var a=new Map,d=new i.BindingContext;d.vm=t,a.set("template",d),e.bindingEngine.boundElements.set(n.childNodes[o],a)}e.recursiveBindNodes(n,t)},this.bindingEngine=new r.BindingEngine}return e.prototype.recursiveBindNodes=function(e,n){for(var t=[],r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);if(1===e.nodeType&&this.bindAttributes(e,n),3===e.nodeType&&this.bindInlinedText(e,n),e.childNodes.length>0)for(r=0;r<e.childNodes.length;r++)t.indexOf(e.childNodes[r])>-1&&this.recursiveBindNodes(e.childNodes[r],n)},e.prototype.bindAttributes=function(e,n){for(var t=[],r=e.attributes.length-1;r>=0;r--){(a=this.bindingEngine.parseBinding(e.attributes[r].name,e.attributes[r].value,e,n))&&(t.push(a),e.removeAttribute(e.attributes[r].name))}for(var i=0,o=t;i<o.length;i++){var a=o[i];this.bindingEngine.bindInitPhase(a)}for(var d=0,l=t;d<l.length;d++){a=l[d];this.bindingEngine.bindUpdatePhase(a)}},e.prototype.bindInlinedText=function(e,n){var t=/\${[a-zA-Z.\s?:']*}/gm;if(t.test(e.textContent)){for(var r=e.textContent.split(t),i=e.textContent.match(t),o=[],a=0;a<r.length;a++){o.push(document.createTextNode(r[a]));var d=document.createElement("span");if(i[a]){var l=this.bindingEngine.parseBinding("@text",i[a].substring(2,i[a].length-1),d,n);l&&(l.element=d,this.bindingEngine.bindInitPhase(l),this.bindingEngine.bindUpdatePhase(l)),o.push(d)}}e.replaceWith.apply(e,o)}},e}();n.Imagine=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BindingEngine=void 0;var r=t(0),i=t(5),o=t(2),a=t(6),d=function(){function e(){var n=this;this.parseBinding=function(t,i,o,a){var d={handler:"",parameter:"",propertyName:i,scope:null,bindingValue:null,element:o};switch(t[0]){case"@":if(!e.handlers[t.substr(1)])throw"Unknown binding '"+t.substr(1)+"'";d.handler=t.substr(1);break;case":":d.handler="__property",d.parameter=t.substr(1);break;case"_":d.handler="__attribute",d.parameter=t.substr(1);break;case"#":d.handler="__event",d.parameter=t.substr(1);break;default:return null}var l=/^([\w.]+)\s*\?\s*'([\w\s:\-?!+\/#=]+)'\s*:\s*'([\w\s:\-?!+\/#=]+)'\s*$/gm,s=/^([\w.]+)\s*==\s*'([\w\s:\-?!+\/#=]+)'\s*$/gm,u=/^([\w.]+)\s*==\s*([0-9]+)\s*$/gm;if(i.match(/^[\w.]+$/gm)){var p=n.resolveScopeAndCreateDependencyTree(a,i,t,i,o)||{},c=p.propertyName,f=p.scope;if(d.propertyName=c||d.propertyName,d.scope=f,void 0!==c)"this"===c?d.bindingValue=f:f instanceof Object&&c in f&&(r.isObservableArray(f[c])?d.bindingValue=f[c]:r.isObservableProp(f,c)?d.bindingValue=r.getAtom(f,c):(f[c],d.bindingValue=f[c]));else{if(!(i.indexOf(".")<0))return null;d.bindingValue=i,d.scope=a}}else if(i.match(l)){var h=l.exec(i),m=h[1],v=n.resolveScopeAndCreateDependencyTree(a,m,t,i,o)||{},b=v.propertyName,g=v.scope;if(void 0===b)return null;if(!(b in g))return null;var y=r.computed((function(){return g[b]?h[2]:h[3]}));d.propertyName=b,d.bindingValue=y,d.scope=g}else if(i.match(u)||i.match(s)){var N=i.match(s)?s.exec(i):u.exec(i),x=(m=N[1],i.match(s)?N[2]:parseInt(N[2])),w=n.resolveScopeAndCreateDependencyTree(a,m,t,i,o)||{},E=w.propertyName,H=w.scope;if(void 0===E)return null;if(!(E in H))return null;y=r.computed((function(){return H[E]===x}));d.propertyName=E,d.bindingValue=y,d.scope=H}else if("!"==i[0]){var _=n.resolveScopeAndCreateDependencyTree(a,i.substr(1),t,i,o)||{},C=_.propertyName,O=_.scope;if(void 0===C)return null;y=r.computed((function(){return!O[C]}));d.propertyName=C,d.bindingValue=y,d.scope=O}else if(i.indexOf("+")>0){var P=i.split("+");P=P.map((function(e){return e.trim()}));for(var T=/^'([\w#/]+)'$/gm,V=!0,j=0;j<P.length;j++){if(!P[j].match(T))if(void 0===(c=(n.resolveScopeAndCreateDependencyTree(a,P[j],t,i,o)||{}).propertyName)){V=!1;continue}}if(!V)return null;y=r.computed((function(){for(var e="",r=0;r<P.length;r++)if(P[r].match(T))e+=T.exec(P[r])[1];else{var d=n.resolveScopeAndCreateDependencyTree(a,P[r],t,i,o),l=d.propertyName,s=d.scope;l in s&&(e+=s[l])}return e}));d.propertyName=i.substr(1),d.bindingValue=y}return"__event"==d.handler&&(d.scope=a),d},this.bindInitPhase=function(t,i){var a;void 0===i&&(i=!1);var d,l,s=e.handlers[t.handler];n.boundElements.has(t.element)?d=n.boundElements.get(t.element):(d=new Map,n.boundElements.set(t.element,d));var u=t.handler+(t.parameter?":"+t.parameter:"");d.has(u)&&!i||((l=new o.BindingContext).vm=t.scope,l.propertyName=t.propertyName,l.parameter=t.parameter,d.set(u,l),null===(a=s.init)||void 0===a||a.call(n,t.element,n.unwrap(t.bindingValue),l,(function(e){"this"!==t.propertyName&&(l.preventCircularUpdate=!0,r.isObservable(t.bindingValue)?t.bindingValue.set(e):t.bindingValue=e)})))},this.bindUpdatePhase=function(t){var i=e.handlers[t.handler],o=n.boundElements.get(t.element),a=t.handler+(t.parameter?":"+t.parameter:""),d=o.get(a);if(i.update){var l=function(e){var r=n.unwrap(t.bindingValue);d.preventCircularUpdate||i.update(t.element,r,d,e),d.preventCircularUpdate=!1};r.isObservable(t.bindingValue)&&(r.isObservableArray(t.bindingValue)&&r.observe(d.vm,t.propertyName,(function(e){l(e),r.observe(d.vm[t.propertyName],l)})),r.observe(t.bindingValue,l)),l()}},this.boundElements=new WeakMap,this.scopes=new Map}return e.prototype.resolveScopeAndCreateDependencyTree=function(e,n,t,i,o){var a=this,d=[],l=this.recursiveResolveScope(e,n,d);if(d.length>0){var s=[],u=document.createDocumentFragment();if(null==l)for(;o.childNodes.length>0;)u.appendChild(o.childNodes[0]);for(var p=0,c=d;p<c.length;p++){var f=c[p],h=r.observe(f.vm,f.property,(function(){for(var n=0,r=s;n<r.length;n++){(0,r[n])()}for(;u.childNodes.length>0;)o.appendChild(u.childNodes[0]);a.rebind(t,i,e,o)}));s.push(h)}}return l},e.prototype.recursiveResolveScope=function(e,n,t){var r=n.split("."),i=e;switch(r.length){case 1:return"this"===r[0]||r[0]in e?{propertyName:r[0],scope:i}:null;case 2:if(this.scopes.has(r[0]))i=this.scopes.get(r[0]);else{if(!(r[0]in e))throw"Undefined scope: "+r[0];t.push({vm:e,property:r[0]}),i=e[r[0]]}return i&&r[1]in i?{propertyName:r[1],scope:i}:null;default:if(this.scopes.has(r[0]))i=this.scopes.get(r[0]);else{if(!(r[0]in e))throw"Undefined scope: "+r[0];t.push({vm:e,property:r[0]}),i=e[r[0]]}return this.recursiveResolveScope(i,r.slice(1).join("."),t)}},e.prototype.rebind=function(e,n,t,r){var i,o,a=this.parseBinding(e,n,r,t);if(a){if(this.boundElements.has(r)){var d=this.boundElements.get(r),l=a.handler+(a.parameter?":"+a.parameter:"");d.has(l)&&(o=null===(i=d.get(l))||void 0===i?void 0:i.template,d.delete(l))}if(this.bindInitPhase(a,!0),this.boundElements.has(r)&&void 0!==o){d=this.boundElements.get(r),l=a.handler+(a.parameter?":"+a.parameter:"");d.has(l)&&(d.get(l).template=o)}this.bindUpdatePhase(a)}},e.prototype.unwrap=function(e){return r.isObservableArray(e)||!r.isObservable(e)?e:e.get()},e.handlers={},e}();n.BindingEngine=d,d.handlers.text=new i.TextHandler,d.handlers.value=new i.ValueHandler,d.handlers.foreach=new i.ForEachHandler,d.handlers.context=new i.ContextHandler,d.handlers.if=new i.IfHandler,d.handlers.scope=new i.ScopeHandler,d.handlers.html=new i.HtmlHandler,d.handlers.visible=new i.VisibleHandler,d.handlers.__attribute=new i.AttributeHandler,d.handlers.__property=new a.PropertyHandler,d.handlers.__event=new i.EventHandler},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ForEachHandler=n.HtmlHandler=n.ContextHandler=n.IfHandler=n.ScopeHandler=n.AttributeHandler=n.EventHandler=n.ValueHandler=n.VisibleHandler=n.TextHandler=n.BindingHandler=void 0;var r=t(1),i=t(0),o=function(){};n.BindingHandler=o;var a=function(){function e(){}return e.prototype.update=function(e,n){e.innerText=n},e}();n.TextHandler=a;var d=function(){var e=this;this.init=function(n){e.initialValue=getComputedStyle(n).display},this.update=function(n,t){n.style.display=t?e.initialValue:"none"}};n.VisibleHandler=d;var l=function(){function e(){}return e.prototype.init=function(e,n,t,r){e.addEventListener("input",(function(){r(e.value)}))},e.prototype.update=function(e,n){e.value=n},e}();n.ValueHandler=l;var s=function(){function e(){}return e.prototype.init=function(e,n,t){"function"==typeof n&&e.addEventListener(t.parameter,(function(e){n(t.vm,e)}))},e}();n.EventHandler=s;var u=function(){function e(){}return e.prototype.update=function(e,n,t){e.setAttribute(t.parameter,n)},e}();n.AttributeHandler=u;var p=function(){function e(){}return e.prototype.init=function(e,n,t,i){r.scopes.set(n,t.vm)},e}();n.ScopeHandler=p;var c=function(){function e(){}return e.prototype.init=function(e,n,t,r){for(var i=document.createDocumentFragment();e.childNodes.length>0;)i.appendChild(e.childNodes[0]);t.template=i},e.prototype.update=function(e,n,t,i){if(console.log("HOI IK BEN GEWIJZIGD:",e,n,t.template),e.innerText="",n&&t.template){var o=t.template.cloneNode(!0);r.bind(o,t.vm),e.appendChild(o)}},e}();n.IfHandler=c;var f=function(){function e(){}return e.prototype.init=function(e,n,t,r){for(var i=document.createDocumentFragment();e.childNodes.length>0;)i.appendChild(e.childNodes[0]);t.template=i},e.prototype.update=function(e,n,t,i){if(e.innerText="",null!=n&&t.template){var o=t.template.cloneNode(!0);r.bind(o,n),e.appendChild(o)}},e}();n.ContextHandler=f;var h=function(){function e(){}return e.prototype.update=function(e,n,t,i){if(e.innerText="",null!=n){var o=document.createElement("template");o.innerHTML=n,e.appendChild(o.content),setTimeout((function(){for(var n=0;n<e.childNodes.length;n++)r.bind(e.childNodes[n],t.vm)}),0)}},e}();n.HtmlHandler=h;var m=function(){function e(){}return e.prototype.init=function(e,n,t,r){for(var i=document.createDocumentFragment();e.childNodes.length>0;)i.appendChild(e.childNodes[0]);t.template=i},e.prototype.update=function(e,n,t,o){if(o&&"splice"===o.type){for(var a=0,d=o.added;a<d.length;a++){v(u=d[a])}for(var l=0,s=o.removed;l<s.length;l++)for(var u=s[l],p=e.childNodes.length-1;p>=0;p--){if(r.contexts.has(e.childNodes[p])&&r.contexts.get(e.childNodes[p]).has("template"))u===r.contexts.get(e.childNodes[p]).get("template").vm&&e.childNodes[p].remove()}}else if(o&&"update"===o.type){e.innerHTML="";for(var c=0,f=o.newValue;c<f.length;c++){v(u=f[c])}}else for(var h=0,m=n;h<m.length;h++){v(u=m[h])}function v(n){if(t.template){var o=t.template.cloneNode(!0);r.bind(o,n);for(var a=function(t){var a=o.childNodes[t];1===a.nodeType&&setTimeout((function(){if("selecteditem"in e&&"selected"in a){var t={selected:i.observable.box(!1)},o=!1;i.observe(t.selected,(function(t){!0!==t.newValue||o||(o=!0,e.selecteditem=n),o=!1})),e.selecteditem===n&&setTimeout((function(){a.selected=!0}),10),i.observe(e,"selecteditem",(function(e){o||(o=!0,e.newValue===n?a.selected=!0:a.selected=!1),o=!1}));var d={handler:"__property",propertyName:"selected",bindingValue:t.selected,scope:t,parameter:"selected",element:a};r.bindingEngine.bindInitPhase(d),r.bindingEngine.bindUpdatePhase(d)}}),0)},d=0;d<o.childNodes.length;d++)a(d);e.appendChild(o)}}},e}();n.ForEachHandler=m},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PropertyHandler=void 0;var r=t(0),i=function(){function e(){}return e.prototype.init=function(e,n,t,i){setTimeout((function(){var n=t.parameter,o=function e(n,t){if(n.hasOwnProperty(t))return Object.getOwnPropertyDescriptor(n,t);var r=Object.getPrototypeOf(n);return r?e(r,t):void 0}(e,n);if(o)Object.defineProperty(e,n,{enumerable:o.enumerable||!1,configurable:o.enumerable||!1,get:o.get,set:function(n){o.set&&o.set.call(e,n),t.preventCircularUpdate||i(n),t.preventCircularUpdate=!1}});else{var a=r.observable.box(),d={};Object.defineProperty(d,n,{enumerable:!0,configurable:!0,get:function(){return a.get()},set:function(e){a.set(e),t.preventCircularUpdate||(t.preventCircularUpdate=!0,i(e)),t.preventCircularUpdate=!1}}),r.extendObservable(e,d)}}),0)},e.prototype.update=function(e,n,t,r){setTimeout((function(){t.preventCircularUpdate=!0,e[t.parameter]=n}),0)},e}();n.PropertyHandler=i}])}));